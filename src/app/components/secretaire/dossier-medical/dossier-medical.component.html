<div class="dossiers-container">
  <h2>Dossiers M√©dicaux</h2>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading">
    <p>Chargement des dossiers m√©dicaux...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !loading" class="error">
    <p>{{ error }}</p>
    <button (click)="loadDossiers()" class="btn-retry">R√©essayer</button>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && !error && dossiers.length === 0" class="empty-state">
    <p>Aucun dossier m√©dical trouv√©</p>
  </div>

  <!-- Dossiers List -->
  <div *ngIf="!loading && dossiers.length > 0" class="dossiers-list">
    <div *ngFor="let dossier of dossiers" class="dossier-card">
      <div class="dossier-header">
        <h3>{{ dossier.patient?.user?.nom }} {{ dossier.patient?.user?.prenom }}</h3>
      </div>

      <div class="dossier-details">
        <div class="detail-item">
          <strong>Date de cr√©ation:</strong>
          {{ dossier.date_creation | date:'dd/MM/yyyy' }}
        </div>

        <div *ngIf="dossier.groupe_sanguin" class="detail-item">
          <strong>Groupe sanguin:</strong>
          <span class="groupe-sanguin">
            {{ getGroupeSanguinIcon(dossier.groupe_sanguin) }}
            {{ dossier.groupe_sanguin.replace('_', ' ') }}
          </span>
        </div>

        <div *ngIf="dossier.patient" class="patient-info">
          <div class="detail-item">
            <strong>Email:</strong> {{ dossier.patient.user?.email || 'Non renseign√©' }}
          </div>
          <div class="detail-item">
            <strong>T√©l√©phone:</strong> {{ dossier.patient.user?.telephone || 'Non renseign√©' }}
          </div>
        </div>
      </div>

      <div class="dossier-actions">
        <button
          (click)="ouvrirDossier(dossier)"
          class="btn-ouvrir">
          üìÅ Ouvrir le dossier
        </button>
      </div>
    </div>
  </div>
</div>
